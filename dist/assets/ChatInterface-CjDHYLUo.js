import{r as T,g as ct,j as n,i as lt,L as _e}from"./index-BEalP12v.js";import{X as ut}from"./XIcon-B2D-XNhD.js";const Pe={un:1,una:1,uno:1,dos:2,tres:3,cuatro:4,cinco:5,seis:6,siete:7,ocho:8,nueve:9,diez:10,once:11,doce:12,trece:13,catorce:14,quince:15,veinte:20,treinta:30,cuarenta:40,cincuenta:50,media:.5,medio:.5,cuarto:.25},dt={aroz:"arroz",aros:"arroz",arros:"arroz",arrz:"arroz",frigol:"frijol",frigoles:"frijoles",frijl:"frijol",friiol:"frijol",asucar:"azucar",aszucar:"azucar",azuca:"azucar",asukar:"azucar",azeite:"aceite",aseite:"aceite",acite:"aceite",lech:"leche",leche:"leche",polllo:"pollo",poyo:"pollo",poll:"pollo",huebo:"huevo",guevo:"huevo",uevo:"huevo",guevos:"huevos",tomat:"tomate",tomae:"tomate",sevolla:"cebolla",cevolla:"cebolla",sebolla:"cebolla",cebollo:"cebolla",paoa:"papa",tortilas:"tortillas",tortila:"tortillas",tortiya:"tortillas",psta:"pasta",sops:"sopa",sop:"sopa",cafee:"cafe",kafe:"cafe",libra:"libras",librs:"libras",libbras:"libras",libar:"libras",kilo:"kilos",killos:"kilos",klos:"kilos",unidad:"unidades",unidads:"unidades",jabon:"jabÃ³n",jamon:"jamÃ³n",limon:"limÃ³n",ranchera:"rancheras",macarron:"macarrones",codito:"coditos",sopero:"soperos",cubito:"cubitos",fosforo:"fosforos"};function G(r){return r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/(\d+)\s*punto\s*(\d+)/g,"$1.$2").replace(/(\d+)\s*coma\s*(\d+)/g,"$1.$2")}function pt(r){const t=G(r);return dt[t]||r}function ft(r){const t=G(r);return/^\d+([.,]\d+)?$/.test(r)||Pe.hasOwnProperty(t)}function ht(r){const t=G(r);return/^\d+([.,]\d+)?$/.test(r)?parseFloat(r.replace(",",".")):Pe[t]||1}function Ne(r,t){const s=G(r);let u=null,p=0;for(const d of t)for(const l of d.keywords){const c=G(l);s.includes(c)&&c.length>p&&(p=c.length,u=d)}return u}function gt(r){const t=/\$\s*(\d+(\.\d+)?)/,s=r.match(t);if(s){const d=parseFloat(s[1]),l=r.replace(s[0],"").trim();return{price:d,textWithoutPrice:l}}const u=/(\d+(\.\d+)?)\s*(dolares|dÃ³lares|pesos|usd)/i,p=r.match(u);if(p){const d=parseFloat(p[1]),l=r.replace(p[0],"").trim();return{price:d,textWithoutPrice:l}}return{price:null,textWithoutPrice:r}}function mt(r){const s=r.replace(/[,;.]+/g," ").replace(/\s+/g," ").trim().split(" "),u=[];let p=null,d=[];for(const l of s){const c=pt(l);ft(c)?(p!==null&&d.length>0&&(u.push({quantity:p,productText:d.join(" ")}),d=[]),p=ht(c)):p!==null?(!["de","el","la","los","las","y","con"].includes(G(c))||d.length>0)&&d.push(c):(p=1,d.push(c))}return p!==null&&d.length>0&&u.push({quantity:p,productText:d.join(" ")}),u}const vt=async(r,t)=>{await new Promise(c=>setTimeout(c,300));const s=G(r);if((s.includes("precio")||s.includes("cuanto cuesta")||s.includes("cuanto vale")||s.includes("vale"))&&!/\d/.test(s)){const c=Ne(r,t);return c?{response:`El precio de **${c.name}** es **$${c.price.toFixed(2)}** por ${c.unit}.`}:{response:"No encontrÃ© ese producto. Intenta con el nombre exacto o una palabra clave."}}const p=mt(r),d=[];let l=0;for(const c of p){const{price:v,textWithoutPrice:j}=gt(c.productText),w=j||c.productText,y=Ne(w,t);if(y){const i=v!==null?v:y.price,a=Math.round(c.quantity*i*100)/100;d.push({quantity:`${c.quantity} ${y.unit}`,product:y.name+(v!==null?" (Precio manual)":""),unit_price:i,subtotal:a}),l+=a}else if(v!==null){const i=w.length>0?w.charAt(0).toUpperCase()+w.slice(1):"Varios",a=Math.round(c.quantity*v*100)/100;d.push({quantity:c.quantity.toString(),product:i,unit_price:v,subtotal:a}),l+=a}else w.trim()&&d.push({quantity:c.quantity.toString(),product:`${w} (NO ENCONTRADO)`,unit_price:0,subtotal:0})}return d.length>0?{items:d,total_items:d.length,grand_total:Math.round(l*100)/100}:{response:"No pude identificar productos. Intenta decir algo como '2 arroz 3 frijoles' o '2 chulas, 1 aceite'."}};var oe={},Ae={},A={};Object.defineProperty(A,"__esModule",{value:!0});A.browserSupportsPolyfills=A.compareTwoStringsUsingDiceCoefficient=A.commandToRegExp=A.concatTranscripts=A.debounce=void 0;var bt=function(t,s,u){var p;return function(){var d=this,l=arguments,c=function(){p=null,u||t.apply(d,l)},v=u&&!p;clearTimeout(p),p=setTimeout(c,s),v&&t.apply(d,l)}};A.debounce=bt;var yt=function(){for(var t=arguments.length,s=new Array(t),u=0;u<t;u++)s[u]=arguments[u];return s.map(function(p){return p.trim()}).join(" ").trim()};A.concatTranscripts=yt;var wt=/\s*\((.*?)\)\s*/g,xt=/(\(\?:[^)]+\))\?/g,St=/(\(\?)?:\w+/g,Rt=/\*/g,Tt=/[-{}[\]+?.,\\^$|#]/g,jt=function(t){return t instanceof RegExp?new RegExp(t.source,"i"):(t=t.replace(Tt,"\\$&").replace(wt,"(?:$1)?").replace(St,function(s,u){return u?s:"([^\\s]+)"}).replace(Rt,"(.*?)").replace(xt,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i"))};A.commandToRegExp=jt;var kt=function(t,s){if(t=t.replace(/\s+/g,"").toLowerCase(),s=s.replace(/\s+/g,"").toLowerCase(),!t.length&&!s.length)return 1;if(!t.length||!s.length)return 0;if(t===s)return 1;if(t.length===1&&s.length===1||t.length<2||s.length<2)return 0;for(var u=new Map,p=0;p<t.length-1;p++){var d=t.substring(p,p+2),l=u.has(d)?u.get(d)+1:1;u.set(d,l)}for(var c=0,v=0;v<s.length-1;v++){var j=s.substring(v,v+2),w=u.has(j)?u.get(j):0;w>0&&(u.set(j,w-1),c++)}return 2*c/(t.length+s.length-2)};A.compareTwoStringsUsingDiceCoefficient=kt;var Ct=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};A.browserSupportsPolyfills=Ct;var K={},H={};Object.defineProperty(H,"__esModule",{value:!0});H.APPEND_TRANSCRIPT=H.CLEAR_TRANSCRIPT=void 0;var _t="CLEAR_TRANSCRIPT";H.CLEAR_TRANSCRIPT=_t;var Nt="APPEND_TRANSCRIPT";H.APPEND_TRANSCRIPT=Nt;Object.defineProperty(K,"__esModule",{value:!0});K.appendTranscript=K.clearTranscript=void 0;var ze=H,Lt=function(){return{type:ze.CLEAR_TRANSCRIPT}};K.clearTranscript=Lt;var Mt=function(t,s){return{type:ze.APPEND_TRANSCRIPT,payload:{interimTranscript:t,finalTranscript:s}}};K.appendTranscript=Mt;var ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.transcriptReducer=void 0;var Le=H,Pt=A,At=function(t,s){switch(s.type){case Le.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case Le.APPEND_TRANSCRIPT:return{interimTranscript:s.payload.interimTranscript,finalTranscript:(0,Pt.concatTranscripts)(t.finalTranscript,s.payload.finalTranscript)};default:throw new Error}};ee.transcriptReducer=At;var Ee={},ce={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};r.default=t})(ce);var le={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.isNative=void 0;var t=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),s=function(d){return d===t};r.isNative=s;var u=t;r.default=u})(le);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=p(ce),s=A,u=le;function p(y){return y&&y.__esModule?y:{default:y}}function d(y,i,a,f,x,g,m){try{var S=y[g](m),C=S.value}catch(_){a(_);return}S.done?i(C):Promise.resolve(C).then(f,x)}function l(y){return function(){var i=this,a=arguments;return new Promise(function(f,x){var g=y.apply(i,a);function m(C){d(g,f,x,m,S,"next",C)}function S(C){d(g,f,x,m,S,"throw",C)}m(void 0)})}}function c(y,i){if(!(y instanceof i))throw new TypeError("Cannot call a class as a function")}function v(y,i){for(var a=0;a<i.length;a++){var f=i[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(y,f.key,f)}}function j(y,i,a){return i&&v(y.prototype,i),y}var w=function(){function y(i){c(this,y),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(i),(0,t.default)()&&(this.updateFinalTranscript=(0,s.debounce)(this.updateFinalTranscript,250,!0))}return j(y,[{key:"setSpeechRecognition",value:function(a){var f=!!a&&((0,u.isNative)(a)||(0,s.browserSupportsPolyfills)());f&&(this.disableRecognition(),this.recognition=new a,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(f)}},{key:"subscribe",value:function(a,f){this.subscribers[a]=f}},{key:"unsubscribe",value:function(a){delete this.subscribers[a]}},{key:"emitListeningChange",value:function(a){var f=this;this.listening=a,Object.keys(this.subscribers).forEach(function(x){var g=f.subscribers[x].onListeningChange;g(a)})}},{key:"emitMicrophoneAvailabilityChange",value:function(a){var f=this;this.isMicrophoneAvailable=a,Object.keys(this.subscribers).forEach(function(x){var g=f.subscribers[x].onMicrophoneAvailabilityChange;g(a)})}},{key:"emitTranscriptChange",value:function(a,f){var x=this;Object.keys(this.subscribers).forEach(function(g){var m=x.subscribers[g].onTranscriptChange;m(a,f)})}},{key:"emitClearTranscript",value:function(){var a=this;Object.keys(this.subscribers).forEach(function(f){var x=a.subscribers[f].onClearTranscript;x()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(a){var f=this;Object.keys(this.subscribers).forEach(function(x){var g=f.subscribers[x],m=g.onBrowserSupportsSpeechRecognitionChange,S=g.onBrowserSupportsContinuousListeningChange;m(a),S(a)})}},{key:"disconnect",value:function(a){if(this.recognition&&this.listening)switch(a){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(a){a&&a.error&&a.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(a){var f=a.results,x=a.resultIndex,g=x===void 0?f.length-1:x;this.interimTranscript="",this.finalTranscript="";for(var m=g;m<f.length;++m)f[m].isFinal&&(!(0,t.default)()||f[m][0].confidence>0)?this.updateFinalTranscript(f[m][0].transcript):this.interimTranscript=(0,s.concatTranscripts)(this.interimTranscript,f[m][0].transcript);var S=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(S=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,S||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(a){this.finalTranscript=(0,s.concatTranscripts)(this.finalTranscript,a)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var i=l(regeneratorRuntime.mark(function f(){var x,g,m,S,C,_,E=arguments;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(x=E.length>0&&E[0]!==void 0?E[0]:{},g=x.continuous,m=g===void 0?!1:g,S=x.language,this.recognition){k.next=3;break}return k.abrupt("return");case 3:if(C=m!==this.recognition.continuous,_=S&&S!==this.recognition.lang,!(C||_)){k.next=11;break}if(!this.listening){k.next=9;break}return k.next=9,this.stopListening();case 9:this.recognition.continuous=C?m:this.recognition.continuous,this.recognition.lang=_?S:this.recognition.lang;case 11:if(this.listening){k.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),k.prev=13,k.next=16,this.start();case 16:this.emitListeningChange(!0),k.next=22;break;case 19:k.prev=19,k.t0=k.catch(13),k.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return k.stop()}},f,this,[[13,19]])}));function a(){return i.apply(this,arguments)}return a}()},{key:"abortListening",value:function(){var i=l(regeneratorRuntime.mark(function f(){var x=this;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),m.next=4,new Promise(function(S){x.onStopListening=S});case 4:case"end":return m.stop()}},f,this)}));function a(){return i.apply(this,arguments)}return a}()},{key:"stopListening",value:function(){var i=l(regeneratorRuntime.mark(function f(){var x=this;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),m.next=4,new Promise(function(S){x.onStopListening=S});case 4:case"end":return m.stop()}},f,this)}));function a(){return i.apply(this,arguments)}return a}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var i=l(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.recognition&&!this.listening)){g.next=4;break}return g.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return g.stop()}},f,this)}));function a(){return i.apply(this,arguments)}return a}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),y}();r.default=w})(Ee);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.useSpeechRecognition=void 0;var t=T,s=A,u=K,p=ee,d=v(Ee),l=v(ce),c=v(le);function v(e){return e&&e.__esModule?e:{default:e}}function j(e,o,h,b,N,R,M){try{var L=e[R](M),I=L.value}catch(F){h(F);return}L.done?o(I):Promise.resolve(I).then(b,N)}function w(e){return function(){var o=this,h=arguments;return new Promise(function(b,N){var R=e.apply(o,h);function M(I){j(R,b,N,M,L,"next",I)}function L(I){j(R,b,N,M,L,"throw",I)}M(void 0)})}}function y(e){return f(e)||a(e)||S(e)||i()}function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return C(e)}function x(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x=function(h){return typeof h}:x=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},x(e)}function g(e,o){return E(e)||_(e,o)||S(e,o)||m()}function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(e,o){if(e){if(typeof e=="string")return C(e,o);var h=Object.prototype.toString.call(e).slice(8,-1);if(h==="Object"&&e.constructor&&(h=e.constructor.name),h==="Map"||h==="Set")return Array.from(e);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return C(e,o)}}function C(e,o){(o==null||o>e.length)&&(o=e.length);for(var h=0,b=new Array(o);h<o;h++)b[h]=e[h];return b}function _(e,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var h=[],b=!0,N=!1,R=void 0;try{for(var M=e[Symbol.iterator](),L;!(b=(L=M.next()).done)&&(h.push(L.value),!(o&&h.length===o));b=!0);}catch(I){N=!0,R=I}finally{try{!b&&M.return!=null&&M.return()}finally{if(N)throw R}}return h}}function E(e){if(Array.isArray(e))return e}var D=!!c.default,k=D&&!(0,l.default)(),O,te=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=o.transcribing,b=h===void 0?!0:h,N=o.clearTranscriptOnListen,R=N===void 0?!0:N,M=o.commands,L=M===void 0?[]:M,I=(0,t.useState)($.getRecognitionManager()),F=g(I,1),q=F[0],Oe=(0,t.useState)(D),ue=g(Oe,2),Ie=ue[0],De=ue[1],$e=(0,t.useState)(k),de=g($e,2),We=de[0],Be=de[1],Fe=(0,t.useReducer)(p.transcriptReducer,{interimTranscript:q.interimTranscript,finalTranscript:""}),pe=g(Fe,2),fe=pe[0],he=fe.interimTranscript,ge=fe.finalTranscript,me=pe[1],qe=(0,t.useState)(q.listening),ve=g(qe,2),Ue=ve[0],Ve=ve[1],Ge=(0,t.useState)(q.isMicrophoneAvailable),be=g(Ge,2),He=be[0],Ke=be[1],ye=(0,t.useRef)(L);ye.current=L;var we=function(){me((0,u.clearTranscript)())},Q=(0,t.useCallback)(function(){q.resetTranscript(),we()},[q]),Qe=function(P,B,V){var U=x(P)==="object"?P.toString():P,X=U.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),Y=(0,s.compareTwoStringsUsingDiceCoefficient)(X,B);return Y>=V?{command:P,commandWithoutSpecials:X,howSimilar:Y,isFuzzyMatch:!0}:null},Xe=function(P,B){var V=(0,s.commandToRegExp)(P),U=V.exec(B);return U?{command:P,parameters:U.slice(1)}:null},xe=(0,t.useCallback)(function(W,P){ye.current.forEach(function(B){var V=B.command,U=B.callback,X=B.matchInterim,Y=X===void 0?!1:X,Te=B.isFuzzyMatch,je=Te===void 0?!1:Te,ke=B.fuzzyMatchingThreshold,Je=ke===void 0?.8:ke,Ce=B.bestMatchOnly,Ze=Ce===void 0?!1:Ce,J=!P&&Y?W.trim():P.trim(),et=Array.isArray(V)?V:[V],Z=et.map(function(z){return je?Qe(z,J,Je):Xe(z,J)}).filter(function(z){return z});if(je&&Ze&&Z.length>=2){Z.sort(function(z,ie){return ie.howSimilar-z.howSimilar});var ne=Z[0],tt=ne.command,rt=ne.commandWithoutSpecials,nt=ne.howSimilar;U(rt,J,nt,{command:tt,resetTranscript:Q})}else Z.forEach(function(z){if(z.isFuzzyMatch){var ie=z.command,it=z.commandWithoutSpecials,st=z.howSimilar;U(it,J,st,{command:ie,resetTranscript:Q})}else{var at=z.command,ot=z.parameters;U.apply(void 0,y(ot).concat([{command:at,resetTranscript:Q}]))}})})},[Q]),Se=(0,t.useCallback)(function(W,P){b&&me((0,u.appendTranscript)(W,P)),xe(W,P)},[xe,b]),Re=(0,t.useCallback)(function(){R&&we()},[R]);(0,t.useEffect)(function(){var W=$.counter;$.counter+=1;var P={onListeningChange:Ve,onMicrophoneAvailabilityChange:Ke,onTranscriptChange:Se,onClearTranscript:Re,onBrowserSupportsSpeechRecognitionChange:De,onBrowserSupportsContinuousListeningChange:Be};return q.subscribe(W,P),function(){q.unsubscribe(W)}},[b,R,q,Se,Re]);var Ye=(0,s.concatTranscripts)(ge,he);return{transcript:Ye,interimTranscript:he,finalTranscript:ge,listening:Ue,isMicrophoneAvailable:He,resetTranscript:Q,browserSupportsSpeechRecognition:Ie,browserSupportsContinuousListening:We}};r.useSpeechRecognition=te;var $={counter:0,applyPolyfill:function(o){O?O.setSpeechRecognition(o):O=new d.default(o);var h=!!o&&(0,s.browserSupportsPolyfills)();D=h,k=h},removePolyfill:function(){O?O.setSpeechRecognition(c.default):O=new d.default(c.default),D=!!c.default,k=D&&!(0,l.default)()},getRecognitionManager:function(){return O||(O=new d.default(c.default)),O},getRecognition:function(){var o=$.getRecognitionManager();return o.getRecognition()},startListening:function(){var e=w(regeneratorRuntime.mark(function h(){var b,N,R,M,L=arguments;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return b=L.length>0&&L[0]!==void 0?L[0]:{},N=b.continuous,R=b.language,M=$.getRecognitionManager(),F.next=4,M.startListening({continuous:N,language:R});case 4:case"end":return F.stop()}},h)}));function o(){return e.apply(this,arguments)}return o}(),stopListening:function(){var e=w(regeneratorRuntime.mark(function h(){var b;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return b=$.getRecognitionManager(),R.next=3,b.stopListening();case 3:case"end":return R.stop()}},h)}));function o(){return e.apply(this,arguments)}return o}(),abortListening:function(){var e=w(regeneratorRuntime.mark(function h(){var b;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return b=$.getRecognitionManager(),R.next=3,b.abortListening();case 3:case"end":return R.stop()}},h)}));function o(){return e.apply(this,arguments)}return o}(),browserSupportsSpeechRecognition:function(){return D},browserSupportsContinuousListening:function(){return k}},re=$;r.default=re})(Ae);(function(r){function t(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(v){return typeof v}:t=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},t(l)}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useSpeechRecognition",{enumerable:!0,get:function(){return s.useSpeechRecognition}}),r.default=void 0;var s=p(Ae);function u(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return u=function(){return l},l}function p(l){if(l&&l.__esModule)return l;if(l===null||t(l)!=="object"&&typeof l!="function")return{default:l};var c=u();if(c&&c.has(l))return c.get(l);var v={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in l)if(Object.prototype.hasOwnProperty.call(l,w)){var y=j?Object.getOwnPropertyDescriptor(l,w):null;y&&(y.get||y.set)?Object.defineProperty(v,w,y):v[w]=l[w]}return v.default=l,c&&c.set(l,v),v}var d=s.default;r.default=d})(oe);const se=ct(oe),zt={cero:"0",uno:"1",una:"1",dos:"2",tres:"3",cuatro:"4",cinco:"5",seis:"6",siete:"7",ocho:"8",nueve:"9",diez:"10",once:"11",doce:"12",trece:"13",catorce:"14",quince:"15",diecisÃ©is:"16",diecisiete:"17",dieciocho:"18",diecinueve:"19",veinte:"20",veintiuno:"21",veintidÃ³s:"22",veintitrÃ©s:"23",veinticuatro:"24",veinticinco:"25",treinta:"30",cuarenta:"40",cincuenta:"50",sesenta:"60",setenta:"70",ochenta:"80",noventa:"90",cien:"100",ciento:"100",mil:"1000",medio:"0.5",media:"0.5",cuarto:"0.25"},Et=()=>{const[r,t]=T.useState("idle"),[s,u]=T.useState(""),[p,d]=T.useState(null),{transcript:l,listening:c,resetTranscript:v,browserSupportsSpeechRecognition:j,isMicrophoneAvailable:w}=oe.useSpeechRecognition(),y=T.useCallback(g=>{let m=g.toLowerCase();return m=m.replace(/\s+(punto|coma)\s+/g,"."),Object.entries(zt).forEach(([S,C])=>{const _=new RegExp(`\\b${S}\\b`,"gi");m=m.replace(_,C)}),m},[]),i=T.useCallback(g=>{let m=y(g);if(m=m.replace(/\s+/g," ").trim(),!m)return"";const S=m.split(" "),C=[];let _=[];for(const E of S)if(/^\d+([.,]\d+)?$/.test(E))_.length>0&&(C.push(_.join(" ")),_=[]),_.push(E);else{const k=["de","el","la","los","las","y","con"];(_.length>0||!k.includes(E))&&_.push(E)}return _.length>0&&C.push(_.join(" ")),C.join(", ")},[y]);T.useEffect(()=>{c&&r!=="recording"&&t("recording")},[c,r]);const a=T.useCallback(async()=>{if(!j){d("Tu navegador no soporta reconocimiento de voz"),t("error");return}if(!w){d("MicrÃ³fono no disponible. Permite el acceso."),t("error");return}try{d(null),u(""),v(),await se.startListening({continuous:!0,language:"es-MX"}),t("recording")}catch(g){console.error("Error al iniciar:",g),d("Error al iniciar. Verifica permisos."),t("error")}},[j,w,v]),f=T.useCallback(()=>{c&&(t("processing"),se.stopListening(),setTimeout(()=>{const g=l;if(console.log("Audio capturado:",g),!g||g.trim().length===0){d("No se detectÃ³ audio. Habla mÃ¡s fuerte."),t("error");return}const m=i(g);console.log("Formateado:",m),u(m),t("completed")},400))},[c,l,i]),x=T.useCallback(()=>{se.stopListening(),v(),t("idle"),u(""),d(null)},[v]);return{recordingState:r,transcript:s,startRecording:a,stopRecording:f,resetRecording:x,error:p}},Ot=r=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[n.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),n.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),n.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"})]}),It=r=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[n.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),n.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),Dt=["aceite","arroz","azÃºcar","frijoles","frijol","harina","avena","leche","queso","crema","huevos","huevo","mantequilla","pollo","carne","chorizo","jamÃ³n","tocino","tomate","cebolla","papa","ajo","chile","zanahoria","cafÃ©","jamaica","sopas","sopa","rancheras","coditos","macarrones","pasta","lasaÃ±a","margarina","vinagre","sal","sardina","aluminio","cubitos","hongos","bolsa","papel","jabÃ³n","fosforos","libras","kilos","gramos","litros","unidades","docenas","cajas","paquetes"],$t={aroz:"arroz",aros:"arroz",arros:"arroz",frigol:"frijol",frigoles:"frijoles",friiol:"frijol",asucar:"azÃºcar",azucar:"azÃºcar",aszucar:"azÃºcar",azeite:"aceite",aseite:"aceite",acite:"aceite",polllo:"pollo",poyo:"pollo",huebo:"huevo",guevo:"huevo",guevos:"huevos",cevolla:"cebolla",sebolla:"cebolla",sevolla:"cebolla",tortilas:"tortillas",tortila:"tortilla",sops:"sopas",cafee:"cafÃ©",cafe:"cafÃ©",libra:"libras",kilo:"kilos",unidad:"unidades"},Wt=({onSendMessage:r,isLoading:t})=>{const[s,u]=T.useState(""),[p,d]=T.useState([]),[l,c]=T.useState(0),[v,j]=T.useState(!1),w=T.useRef(null),y=T.useRef(null),{recordingState:i,transcript:a,startRecording:f,stopRecording:x,resetRecording:g,error:m}=Et(),S=T.useCallback(e=>{const o=e.toLowerCase();return $t[o]||e},[]),C=T.useCallback(e=>{if(!e.trim())return e;const o=e.replace(/[,;]+/g," ").replace(/\s+/g," ").trim().split(" "),h=[];let b=[];for(const N of o){const R=S(N);if(/^\d+([.,]\d+)?$/.test(R))b.length>0&&(h.push(b.join(" ")),b=[]),b.push(R);else{const L=["de","el","la","los","las","y","con"];(b.length>0||!L.includes(R.toLowerCase()))&&b.push(R)}}return b.length>0&&h.push(b.join(" ")),h.join(", ")},[S]);T.useEffect(()=>{i==="completed"&&a&&u(a)},[i,a]),T.useEffect(()=>{var h;const e=s.split(/[,\s]+/),o=((h=e[e.length-1])==null?void 0:h.toLowerCase())||"";if(o.length>=2&&!/^\d/.test(o)){const b=Dt.filter(N=>N.toLowerCase().startsWith(o)&&N.toLowerCase()!==o).slice(0,5);d(b),j(b.length>0),c(0)}else d([]),j(!1)},[s]);const _=e=>{var h;const o=s.split(/(\s+)/);o[o.length-1]=e,u(o.join("")),j(!1),(h=w.current)==null||h.focus()},E=e=>{v&&p.length>0&&(e.key==="ArrowDown"?(e.preventDefault(),c(o=>(o+1)%p.length)):e.key==="ArrowUp"?(e.preventDefault(),c(o=>(o-1+p.length)%p.length)):e.key==="Tab"||e.key==="Enter"?(e.preventDefault(),_(p[l])):e.key==="Escape"&&j(!1))},D=e=>{if(e.preventDefault(),v&&p.length>0){_(p[l]);return}let o=C(s.trim());o=o.replace(/,\s*$/,""),o&&!t&&(r(o),u(""),g())},k=async()=>{i==="recording"?x():["idle","completed","error"].includes(i)&&(u(""),await f())},O=()=>{u(""),g(),j(!1)},te=()=>{if(s.trim()){const e=C(s);e!==s&&u(e)}};T.useEffect(()=>{const e=o=>{var h,b;!((h=y.current)!=null&&h.contains(o.target))&&!((b=w.current)!=null&&b.contains(o.target))&&j(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const $=()=>{const e="p-2.5 sm:p-3 rounded-full transition-all duration-300";switch(i){case"recording":return`${e} bg-red-500 text-white animate-pulse shadow-[0_0_25px_rgba(239,68,68,0.7)]`;case"processing":return`${e} bg-blue-500 text-white shadow-[0_0_20px_rgba(59,130,246,0.6)]`;case"error":return`${e} bg-amber-500 text-white`;default:return`${e} bg-slate-800/80 hover:bg-slate-700 border border-slate-600/50 text-slate-400 hover:text-emerald-400`}},re=()=>{switch(i){case"recording":return'ðŸŽ¤ Grabando... di: "2 arroz 3 frijol 1 aceite"';case"processing":return"â³ Procesando audio...";case"error":return m||"âŒ Error de grabaciÃ³n";default:return"2 arroz 3 frijol â†’ se formatea automÃ¡ticamente"}};return n.jsxs("div",{className:"relative",children:[v&&p.length>0&&n.jsx("div",{ref:y,className:"absolute bottom-full left-0 right-0 mb-2 bg-slate-800/95 backdrop-blur-lg border border-slate-700/50 rounded-2xl shadow-2xl overflow-hidden z-50",children:n.jsx("div",{className:"p-1.5",children:p.map((e,o)=>n.jsxs("button",{type:"button",onClick:()=>_(e),className:`w-full text-left px-4 py-2.5 rounded-xl text-sm transition-all ${o===l?"bg-emerald-500/20 text-emerald-300 border-l-2 border-emerald-400":"text-slate-300 hover:bg-slate-700/50"}`,children:[n.jsx("span",{className:"font-medium",children:e}),n.jsx("span",{className:"text-xs text-slate-500 ml-2 hidden sm:inline",children:"Tab â†¹"})]},e))})}),n.jsxs("form",{onSubmit:D,className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-2.5 rounded-full bg-slate-800/60 backdrop-blur-md border border-slate-700/40 shadow-xl transition-all focus-within:ring-2 focus-within:ring-emerald-500/40 focus-within:border-emerald-500/50",children:[n.jsx("input",{ref:w,type:"text",value:s,onChange:e=>u(e.target.value),onKeyDown:E,onBlur:te,placeholder:re(),disabled:t||i==="recording"||i==="processing",className:"flex-1 bg-transparent px-3 sm:px-4 py-2 text-slate-100 placeholder-slate-500 text-sm sm:text-base focus:outline-none min-w-0",autoComplete:"off",autoCorrect:"off",spellCheck:"false"}),(s||i!=="idle")&&i!=="processing"&&n.jsx("button",{type:"button",onClick:O,className:"p-2 rounded-full text-slate-500 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Limpiar",children:n.jsx(ut,{className:"w-4 h-4"})}),i==="recording"&&n.jsx("div",{className:"hidden sm:flex items-center gap-1 px-2",children:n.jsxs("div",{className:"flex gap-0.5",children:[n.jsx("span",{className:"w-1 h-5 bg-red-400 rounded-full animate-[wave_0.5s_ease-in-out_infinite]"}),n.jsx("span",{className:"w-1 h-5 bg-red-400 rounded-full animate-[wave_0.5s_ease-in-out_0.1s_infinite]"}),n.jsx("span",{className:"w-1 h-5 bg-red-400 rounded-full animate-[wave_0.5s_ease-in-out_0.2s_infinite]"})]})}),n.jsx("button",{type:"button",onClick:k,disabled:t||i==="processing",className:$(),title:i==="recording"?"Detener":"Grabar voz",children:i==="processing"?n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Ot,{className:"w-5 h-5"})}),n.jsx("button",{type:"submit",disabled:t||!s.trim()||i==="recording"||i==="processing",className:"p-2.5 sm:p-3 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 hover:from-emerald-400 hover:to-teal-500 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed text-white shadow-lg shadow-emerald-500/20 transform active:scale-95 transition-all",title:"Enviar",children:n.jsx(It,{className:"w-5 h-5"})})]}),n.jsx("style",{children:`
        @keyframes wave {
          0%, 100% { transform: scaleY(0.6); opacity: 0.6; }
          50% { transform: scaleY(1.2); opacity: 1; }
        }
      `})]})},Bt=r=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[n.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Ft=r=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:n.jsx("path",{d:"m12 3-1.9 5.8-5.8 1.9 5.8 1.9 1.9 5.8 1.9-5.8 5.8-1.9-5.8-1.9z"})}),ae=r=>typeof r!="number"?"$0.00":`$${r.toFixed(2)}`,qt=()=>n.jsxs("div",{className:"flex items-center justify-center space-x-2 p-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-400 animate-pulse [animation-delay:-0.3s]"}),n.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-400 animate-pulse [animation-delay:-0.15s]"}),n.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-400 animate-pulse"})]}),Ut=({invoice:r})=>n.jsxs("div",{className:"bg-dark-surface/50 rounded-xl text-slate-200 w-full max-w-md overflow-hidden border border-dark-border shadow-lg",children:[n.jsx("h3",{className:"text-lg font-semibold p-4 border-b border-dark-border text-primary-400 flex justify-between items-center bg-dark-surface/50",children:n.jsx("span",{children:"Factura de Pedido"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm text-left",children:[n.jsx("thead",{className:"bg-dark-surface/80",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 font-medium text-slate-400",children:"Cant."}),n.jsx("th",{className:"px-4 py-2 font-medium text-slate-400",children:"Producto"}),n.jsx("th",{className:"px-4 py-2 font-medium text-right text-slate-400",children:"Subtotal"})]})}),n.jsx("tbody",{className:"divide-y divide-dark-border",children:r.items.map((t,s)=>n.jsxs("tr",{className:"hover:bg-dark-surface/30 transition-colors",children:[n.jsx("td",{className:"px-4 py-3 w-16 text-slate-300",children:t.quantity}),n.jsxs("td",{className:"px-4 py-3 font-medium text-white",children:[t.product,n.jsxs("div",{className:"text-xs text-slate-500",children:[ae(t.unit_price)," c/u"]})]}),n.jsx("td",{className:"px-4 py-3 text-right font-mono text-primary-300 w-24",children:ae(t.subtotal)})]},s))})]})}),n.jsx("div",{className:"p-4 bg-dark-surface/80 space-y-3 border-t border-dark-border",children:n.jsxs("div",{className:"flex justify-between items-center text-lg",children:[n.jsx("span",{className:"font-bold text-slate-300",children:"TOTAL:"}),n.jsx("span",{className:"font-bold text-2xl text-transparent bg-clip-text bg-gradient-to-r from-primary-400 to-secondary-400",children:ae(r.grand_total)})]})})]}),Me=({message:r})=>{const t=r.sender==="user",s=()=>r.isLoading?n.jsx(qt,{}):r.invoice?n.jsx(Ut,{invoice:r.invoice}):r.text?n.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:r.text}):null,u=t?"bg-gradient-to-br from-primary-600 to-primary-700 text-white rounded-br-none":"bg-dark-surface border border-dark-border text-slate-200 rounded-bl-none",p=r.invoice?"p-0":"p-4";return n.jsxs("div",{className:`flex items-end gap-3 w-full ${t?"justify-end":"justify-start"} animate-fade-in`,children:[!t&&n.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-secondary-500 to-primary-500 flex items-center justify-center shadow-lg shadow-primary-900/20",children:n.jsx(Ft,{className:"w-5 h-5 text-white"})}),n.jsx("div",{className:`rounded-2xl ${u} ${p} max-w-lg shadow-md transition-all hover:shadow-lg`,role:"log","aria-live":t?"off":"polite",children:s()}),t&&n.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-dark-surface border border-dark-border flex items-center justify-center shadow-lg",children:n.jsx(Bt,{className:"w-5 h-5 text-slate-400"})})]})},Vt=r=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[n.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),n.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Gt=r=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[n.jsx("path",{d:"M3 3v18h18"}),n.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]}),Qt=({products:r})=>{const[t,s]=T.useState([lt]),[u,p]=T.useState(!1),[d,l]=T.useState(null),c=T.useRef(null),v=()=>{var w;(w=c.current)==null||w.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{v()},[t]);const j=async w=>{if(!w.trim())return;const y={id:Date.now().toString(),sender:"user",text:w};s(i=>[...i,y]),p(!0),l(null);try{const i=await vt(w,r);let a;"items"in i&&"grand_total"in i?a={id:(Date.now()+1).toString(),sender:"ai",invoice:i}:a={id:(Date.now()+1).toString(),sender:"ai",text:i.response||"No pude procesar esa solicitud."},s(f=>[...f,a])}catch(i){const a="Lo siento, ocurriÃ³ un error al procesar tu solicitud.";l(a),s(f=>[...f,{id:(Date.now()+1).toString(),sender:"ai",text:a}]),console.error(i)}finally{p(!1)}};return n.jsxs("div",{className:"flex flex-col h-screen bg-dark-bg text-slate-100 font-sans overflow-hidden",children:[n.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary-900/20 rounded-full blur-[100px]"}),n.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-secondary-900/20 rounded-full blur-[100px]"})]}),n.jsxs("header",{className:"bg-dark-surface/80 backdrop-blur-md p-4 border-b border-dark-border shadow-lg sticky top-0 z-10 flex justify-between items-center",children:[n.jsx(_e,{to:"/ventas",className:"p-2 text-slate-400 hover:text-primary-400 transition-all hover:bg-primary-500/10 rounded-lg",title:"Ver Ventas",children:n.jsx(Gt,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent font-heading",children:"Asistente de Tienda"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium tracking-wide",children:"AI POWERED ASSISTANT"})]}),n.jsx(_e,{to:"/admin",className:"p-2 text-slate-400 hover:text-secondary-400 transition-all hover:bg-secondary-500/10 rounded-lg",title:"AdministraciÃ³n",children:n.jsx(Vt,{className:"w-6 h-6"})})]}),n.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-6 relative z-0 scroll-smooth",children:[t.map(w=>n.jsx(Me,{message:w},w.id)),u&&n.jsx(Me,{message:{id:"loading",sender:"ai",isLoading:!0}}),n.jsx("div",{ref:c})]}),n.jsxs("footer",{className:"p-4 bg-dark-surface/90 backdrop-blur-md border-t border-dark-border sticky bottom-0 z-10",children:[d&&n.jsx("p",{className:"text-red-400 text-center mb-2 text-sm animate-pulse",children:d}),n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsx(Wt,{onSendMessage:j,isLoading:u})})]})]})};export{Qt as default};
